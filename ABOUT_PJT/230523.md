# Django에 MySQL을 연동하는 이유(1)
- 장고에 `MySQL`을 연동하여 프로젝트를 진행하고 싶다. 그런데 여기서 드는 의문 하나.
- 어째서 장고의 기본 DBMS인 `sqlite3` 대신 `MySQL`을 써야 하는가. 
  - 그냥 써보고 싶어서는 이유가 되지 않는다. 그리고 만약 프로젝트에 부적합하다면 과감하게 내려놓아야한다.
  - 그렇다면 두 DBMS에 관해 알아봐야한다. 오늘은 sqlite의 한계를 알아보자.

## SQLite3
- 사용하기 쉽고 간편하지만, 실제 서비스에 사용하기엔 너무 가볍고 구현할 수  있는 기능 제약이 많다. 예를 들자면 alter - 컬럼을 수정하는 작업이 불가능하다.
- 대규모 데이터를 저장하기에는 적합하지 않다.
- 데이터 형식이 다른 프로덕트와 비교해서 상당히 적다(blob, null, integer, text)
  - 반면 mysql의 경우 날짜와 시간을 위한 전용 데이터 형식, 정수와 실수를 위한 다양한 정밀도를 비롯해 훨씬 더 많은 형식이 있음
  - 비교적 적은 수의 데이터 형식을 저장하거나 데이터 계층을 사용하여 데이터 검증을 수행하려면 SQLite가 유용하다. 그러나 데이터 계층에서 자체 검증 및 정규화 기능을 제공하도록 하려면 MySQL(또는 마리아DB)을 사용해야 한다.
- SQLite는 데스크톱 또는 모바일 앱과 같이 동시 사용자가 한 명인 애플리케이션에 가장 적합하다.
  - MySQL과 마리아DB는 여러 명의 동시 사용자에 대응하도록 설계됐다. 또한 MySQL과 마리아DB는 클러스터 및 수평 확장 솔루션을 제공할 수 있지만 SQLite는 할 수 없다.

- 해당 DBMS는 프로젝트를 실제로 배포하기 이전에 테스트 할 때는 별 무리가 없지만, 배포 후 실제 서버에서 DBMS로 작동하기에는 다소 무리가 있다.
- 동시성(Concurrency)의 제한: 동시에 여러 프로세스가 db에 액세스하고 쿼리가 가능하지만 주어진 시간에 하나의 프로세스만이 db를 변경할 수 있다. 즉, sqlite는 대부분의 다른 임베디드 DBMS보다는 더 큰 동시성을 지원하지만, MySQL이나 PostgreSQL과 같은 클라이언트-서버의 구조를 같는 RDBMS만큼은 아니다.


## SQLite가 적합하지 않은 경우
- SQLite가 지원하지 않는 기능을 사용하는 앱
  - SQLite는 여러 가지 관계형 데이터베이스 기능을 지원하지 않으며 많은 경우 앞으로도 지원할 예정이 없다. 대체로 코너 케이스에 해당하는 기능이지만, 그 기능이 필요하다면 사용할 수 없다.

- 수평 확장 설계가 필요한 앱.
  - SQLite 인스턴스는 단일체이며 독립적이고, 인스턴스 간 기본 동기화 기능이 없다. 또한 여러 개를 연합하거나 클러스터를 만들 수 없다. 따라서 수평 확장 설계를 사용하는 애플리케이션에서는 SQLite를 사용할 수 없다.

- 여러 연결에서의 동시 쓰기 작업을 실행하는 앱. 
  - SQLite는 쓰기 작업 시 데이터베이스를 잠그므로 여러 동시 쓰기 작업이 실행되는 앱에서는 성능 문제가 발생할 수 있다. 다만 여러 동시 읽기 작업을 실행하는 앱은 대체로 빠르게 실행된다. SQLite 3.7.0 이상은 여러 쓰기 작업의 속도를 높이기 위한 로그 선행 기입(Write-Ahead Logging)을 제공하지만 몇 가지 제약이 따른다. 대안으로는 위에 언급한 버클리 DB가 있다.

- 강한 데이터 형식 지정이 필요한 앱.
  - SQLite의 데이터 형식은 비교적 소수다. 예를 들어 기본 datetime 형식이 없다. 따라서 애플리케이션에서 이러한 형식을 처리해야 한다. 애플리케이션이 아닌 데이터베이스에서 datetime 값을 위한 입력을 정규화하고 제약하고자 한다면 SQLite는 적합하지 않다.

## 견해
- 이렇게 정보를 긁어봐도 아직 체감이 되지 않는다. 우선 장고 프로젝트를 진행하면서 sqlite로 테스트를 진행하고, 실제 배포하기 전에 MySQL을 연동하는 게 적합해보이지만, 우리 프로젝트에 그정도의 대용량 DB가 필요한지는 또다른 문제이다.
- 그리고 내가 구축할 모델과 구현할 기능을 따져보고 선택해야 할 문제임에 확신했다. 팀원들과 UI와 ERD를 설계한 후, 토의해야 겠다.
- [참고할만 한 페이지](https://ciksiti.com/ko/chapters/9115-mysql-vs-sqlite--compared)
- [참고할만 한 페이지2](https://yejinha.github.io/posts/about-database/)

## 원문
<https://eveningminusdot.tistory.com/10>
<https://runebook.dev/ko/docs/sqlite/limits>
<https://ninefloor-design.tistory.com/304>
<https://sean-parkk.github.io/study/sqlite3/>
<https://www.ciokorea.com/tags/77388/SQLite/117231#csidx56ff57c68dacce9b93158e8b6dfacbd >